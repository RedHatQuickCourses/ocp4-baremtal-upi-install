<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab (1 of 2) :: Red Hat OpenShift Container Platform 4: Baremetal UPI Installation</title>
    <link rel="prev" href="index.html">
    <link rel="next" href="section2.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Red Hat OpenShift Container Platform 4: Baremetal UPI Installation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ocp4-baremtal-upi-install" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat OpenShift Container Platform 4: Baremetal UPI Installation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">UPI Baremetal Install</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="section1.html">Lab (1 of 2)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section2.html">Lab (2 of 2)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat OpenShift Container Platform 4: Baremetal UPI Installation</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat OpenShift Container Platform 4: Baremetal UPI Installation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat OpenShift Container Platform 4: Baremetal UPI Installation</a></li>
    <li><a href="index.html">UPI Baremetal Install</a></li>
    <li><a href="section1.html">Lab (1 of 2)</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Lab (1 of 2)</h1>
<div class="sect1">
<h2 id="_lab_prerequisites"><a class="anchor" href="#_lab_prerequisites"></a>Lab prerequisites</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the ssh command given the NovelloShell output to login to the <code>provision</code> and <code>lb</code> virtual machines.</p>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">laptop@user:~ $ ssh -i ~/.ssh/pntae_training_key cloud-user@10.0.108.202
...
...
[cloud-user@provision ~]$

You can ssh to `lb` virtual machine from the `provision` virtual machine.

[cloud-user@provision ~]$ ssh lb
...
...
[cloud-user@lb ~]$</code></pre>
</div>
</div>
</li>
<li>
<p>Ensure the <code>provision</code> and <code>lb</code> virtual machines are unregistered and unsubscribed.</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">sudo subscription-manager unregister; sudo subscription-manager remove --all; sudo subscription-manager clean</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">[cloud-user@provision ~]$ sudo subscription-manager unregister; sudo subscription-manager remove --all; sudo subscription-manager clean
This system is currently not registered.
0 subscriptions removed from this system.
All local data removed</code></pre>
</div>
</div>
</li>
<li>
<p>Now, register and subscribe the <code>provision</code> and `lb`virtual machines with your customer portal (access.redhat.com) credentials.</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">sudo subscription-manager register</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">Registering to: subscription.rhsm.redhat.com:443/subscription
Username:
Password:
The system has been registered with ID: bc91d274-84b4-4175-a4df-xxyyzz
The registered system name is: provision.example.com

Registering to: subscription.rhsm.redhat.com:443/subscription
Username:
Password:
The system has been registered with ID: bc91d274-84b4-4175-a4df-xxyyzz
The registered system name is: lb.example.com</code></pre>
</div>
</div>
</li>
<li>
<p>Additional lab information:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The connection is already modified by executing following commands:</p>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">$ sudo nmcli connection modify "System eth1" connection.zone internal
$ sudo nmcli connection modify "System eth0" connection.zone external</code></pre>
</div>
</div>
</li>
<li>
<p>You can verify the same by running following command:</p>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">$ sudo firewall-cmd --list-all --zone=internal
$ sudo firewall-cmd --list-all --zone=external</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>All required configuration files are in <code>/tmp</code> directory of <code>provision</code> and <code>lb</code> virtual machines.</p>
</li>
<li>
<p>The RHCOS live image <code>rhcos-418.94.202501221327-0-live.x86_64.iso</code> is already downloaded and attached to all nodes (bootstarap, master and worker) as <code>rhcos-418.94.202501221327-0-live.x86_64-pntae</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_load_balancer_virtual_machine_setup"><a class="anchor" href="#_load_balancer_virtual_machine_setup"></a>Load Balancer Virtual Machine Setup</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure PSI&#8217;s DNS entries are removed.
You will find this information in reference material.</p>
</li>
<li>
<p>Make sure required packages are installed on <code>lb</code> machine:</p>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">jq
ipmitool
firewalld
tmux
podman
vim
wget
telnet
curl
haproxy</code></pre>
</div>
</div>
</li>
<li>
<p>You need to configure the firewall rules as per the RHOCP 4.18 requirements.</p>
</li>
<li>
<p>Reference configuration files for HA-proxy server are placed in <code>lb</code> virtual machine&#8217;s <code>/tmp</code> directory.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_provision_virtual_machine_setup"><a class="anchor" href="#_provision_virtual_machine_setup"></a>Provision Virtual Machine Setup</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure PSI&#8217;s DNS entries are removed.
You will find this information in reference material.</p>
</li>
<li>
<p>Make sure required packages are installed on <code>provision</code> machine:</p>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">jq
ipmitool
dhcp-server
bind
bind-utils
firewalld
httpd
httpd-tools
tmux
podman
telnet</code></pre>
</div>
</div>
</li>
<li>
<p>Create <code>lab-user</code> on <code>provision</code> machine.
Make sure <code>lab-user</code> has sudo privileges.</p>
</li>
<li>
<p>Reference configuration files for DNS and DHCP server are placed in <code>provision</code> machine&#8217;s <code>/tmp</code> directory.
Configure the <code>provision</code> machine as DNS and DHCP server.</p>
</li>
<li>
<p>You need to configure the firewall rules as per the RHOCP 4.18 requirements.</p>
</li>
<li>
<p>For oc client and openshift install binary, use this the URL - <a href="https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.18.11/openshift-client-linux.tar.gz" class="bare">https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.18.11/openshift-client-linux.tar.gz</a> and <a href="https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.18.11/openshift-install-linux.tar.gz" class="bare">https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.18.11/openshift-install-linux.tar.gz</a></p>
</li>
<li>
<p>Other configuration files such as <code>install.conf</code> and additional custom command files is also placed under <code>provision</code> machine&#8217;s <code>/tmp</code> directory.</p>
</li>
<li>
<p>Make sure <code>core</code> user is able to ssh nodes (worker, master and bootstrap) using <code>lab-user</code> SSH keys.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">UPI Baremetal Install</a></span>
  <span class="next"><a href="section2.html">Lab (2 of 2)</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
